"use strict";angular.module("adminApp").controller("userAdminController",["$scope","queryUserService",function(e,t){t.queryUserData("http://192.168.1.122:8002/test/test").success(function(t){e.opts={data:t.data,columns:[{data:"name"},{data:"realName"},{data:"roleName"},{data:"sex"},{data:"tel"},{data:"remarks"},{data:null}],columnDefs:[{targets:6,render:function(e,t,n,r){return'<button class="btn btn-default btn-edit"  style="margin-right:5px;">修改</button><button class="btn btn-default btn-delete">删除</button>'}}],deferRender:!0};$("#userTb").dataTable(e.opts)})}]),angular.module("adminApp").controller("WechatController",["$scope","weChatService",function(e,t){e.opts={ajax:"/js/data/table.json",columns:[{data:"name"},{data:"position"},{data:"office"},{data:"extn"},{data:"start_date"},{data:"salary"},{data:null}],columnDefs:[{targets:6,render:function(e,t,n,r){return'<button class="btn btn-default btn-edit"  style="margin-right:5px;">修改</button><button class="btn btn-default btn-delete">删除</button>'}}],deferRender:!0}}]).controller("sefDefMenuController",["$scope","wechatService",function(e,t){t.querySefDefMenuArr("js/data/defMenu.json").success(function(t){e.menuData=t,e.isLast=function(e){return e!=t.length-1?"border-r":!1}}).then(function(){t.querySefDefSubMenuArr("js/data/defSubMenu.json").success(function(t){var n=t;e.menuGroup=[],e.menuData.forEach(function(t,r){var a=t.id,o=[];n.forEach(function(e,t){a==e.parentId&&o.push(e)}),e.menuGroup.push({id:a,subMenu:o})})})})}]).controller("defMenuController",["$scope","wechatService","wechartStorageService",function(e,t,n){t.querySefDefMenuArr("js/data/selfDefMenu.json").success(function(t){e.menus=t;var r=n.get()||t;e.addSubMenu=function(t){t.subMenus.push({namwe:"",addOper:t.addOper,parentId:t.id,updOper:t.addOper,addTime:(new Date).getTime()}),r=e.menus,n.put(r)},e.editMenu=function(e,t){e.isabled=!0},e.doneEditing=function(t,r){t.isabled=!1,t.name=t.name.trim(),n.put(e.menus)},e.removeMenu=function(t,a){a.subMenus.splice(a.subMenus.indexOf(t),1),r[r.indexOf(a)]=a,e.menus=r,n.put(r)}})}]),angular.module("adminApp").controller("tableCtrl",["$scope","httpReqService",function(e,t){e.opts={ajax:"/js/data/table.json",columns:[{data:"name"},{data:"position"},{data:"office"},{data:"extn"},{data:"start_date"},{data:"salary"},{data:null}],columnDefs:[{targets:6,render:function(e,t,n,r){return'<button class="btn btn-default btn-edit"  style="margin-right:5px;">修改</button><button class="btn btn-default btn-delete">删除</button>'}}],deferRender:!0}}]).controller("chartCtrl",["$scope","httpReqService","queryChartService","ConstantService",function(e,t,n,r){var a={tooltip:{trigger:"axis"},calculable:!0,yAxis:[{type:"value"}]},o=function(e,t){var n=echarts.init(document.getElementById(e));n.setOption(t)};n.getChartModel(r.LINECHART_REQ_URL).then(function(t){var n=new Array;e.lineOpts=$.extend({legend:{data:t.legend},xAxis:[{type:"category",boundaryGap:!1,data:t.xField}],series:t.series},a),t.series.forEach(function(e,t){e.itemStyle={normal:{areaStyle:{type:"default"}}},n.push(e)}),e.stackOpts=e.lineOpts,e.stackOpts.series=n,o("linechart",e.stackOpts),o("stackchart",e.lineOpts)}).then(function(){n.getChartModel(r.BARCHART_REQ_URL).then(function(t){e.barOpts=$.extend({legend:{data:t.legend},xAxis:[{type:"category",data:t.xField}],series:t.series},a),o("barchart",e.barOpts)})}),t.queryChartData(r.PIECHART_REQ_URL).success(function(t){e.pieOpts={tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",x:"left",data:t.legend},series:t.series},o("piechart",e.pieOpts)})}]).controller("dropzoneCtrl",["$scope",function(e){$("#dropz").dropzone({url:"/upload",maxFiles:10,maxFilesize:5})}]).controller("configChartCtrl",["$scope",function(e){e.changeChart=function(){layer.confirm("你确定要修改图表么？",{icon:3},function(e){layer.close(e)})},e.addChart=function(){layer.open({type:1,skin:"layui-layer-demo",closeBtn:!1,shift:2,shadeClose:!0,content:"<div>showing</div>"})}}]).controller("uigridController",["$scope","httpReqService",function(e,t){e.gridOptions={enableSorting:!0,columnDefs:[{field:"name"},{field:"position"},{field:"salary",enableSorting:!1},{field:"start_date"},{field:"office"},{field:"extn"}],onRegisterApi:function(t){e.grid1Api=t}},t.queryTableData("js/data/table.json").success(function(t){e.gridOptions.data=t.data})}]).controller("HeaderController",["$scope",function(e){$.toggleSidebar=function(){},$.toggleDropdown=function(){}}]),!function(){angular.module("app.directives",[]).directive("fullscreen",["uiLoad","$document","$window",function(e,t,n){return{restrict:"AC",template:'<i class="fa fa-expand fa-fw icon-expand"></i><i class="fa fa-compress fa-fw icon-compress"></i>',link:function(n,r,a){r.addClass("hide"),e.load("vendor/libs/screenfull.min.js").then(function(){screenfull.enabled&&!navigator.userAgent.match(/Trident.*rv:11\./)&&r.removeClass("hide"),r.on("click",function(){var e;a.target&&e==$(a.target)[0],screenfull.toggle(e)}),t.on(screenfull.raw.fullscreenchange,function(){screenfull.isFullscreen?r.addClass("active"):r.removeClass("active")})})}}}]).directive("collapseAccordion",[function(){return{restrict:"A",link:function(e,t,n){t.find("a").on("click",function(){$(this).parent().siblings().find("ul").slideUp(300),$(this).parent().find("ul").slideToggle(300)})}}}]).directive("tabswitch",[function(){return{restrict:"A",link:function(e,t,n){t.find("li").find("a").on("click",function(e){e.preventDefault(),$(this).tab("show")})}}}]).directive("uiToggleClass",["$timeout","$document",function(e,t){return{restrict:"AC",link:function(e,t,n){t.on("click",function(e){function r(e,t){for(var n=new RegExp("\\s"+e.replace(/\*/g,"[A-Za-z0-9-_]+").split(" ").join("\\s|\\s")+"\\s","g"),r=" "+$(t)[0].className+" ";n.test(r);)r=r.replace(n," ");$(t)[0].className=$.trim(r)}e.preventDefault();var a=n.uiToggleClass.split(","),o=n.target&&n.target.split(",")||Array(t),i=0;angular.forEach(a,function(e){var t=o[o.length&&i];-1!==e.indexOf("*")&&r(e,t),$(t).toggleClass(e),i++})})}}}])}(),angular.module("adminApp").directive("tabswitch",[function(){return{restrict:"A",link:function(e,t,n){t.find("li").find("a").on("click",function(e){e.preventDefault(),$(this).tab("show")})}}}]),!function(){angular.module("adminApp").directive("uiDatatable",[function(){return{restrict:"AE",scope:{opts:"=",initComplete:"&",resOpts:"@",onOrder:"&",onPage:"&",onSearch:"&"},link:function(e,t,n){var r=e.opts,a=e.resOpts?JSON.parse(e.resOpts):null;a&&$.extend(r,{initComplete:function(){var e=this.api();e.columns().indexes().flatten().each(function(t){var n=e.column(t);if(a.filterIndex&&a.filterWrapper&&n.index()==a.filterIndex){var r=$("thead").find("tr").eq(0).find("th").eq(a.filterIndex).text(),o=$('<select class="form-control input-sm"><option value="">'+r+"</option></select>").prependTo($(a.filterWrapper).empty()).on("change",function(){var e=$.fn.dataTable.util.escapeRegex($(this).val());n.search(e?"^"+e+"$":"",!0,!1).draw()});n.data().unique().sort().each(function(e,t){o.append('<option value="'+e+'">'+e+"</option>")})}})}});$(t).DataTable(r);$(t).on("order.dt",function(t){e.onOrder(t)}).on("search.dt",function(t){e.onSearch(t)}).on("page.dt",function(){e.onPage(event)}),$(t).find("tbody").on("click","tr td.btn-edit",function(){})}}}])}(),!function(){angular.module("adminApp").directive("echarts",["$rootScope",function(e){return{restrict:"AE",scope:{data:"@"},link:function(e,t,n){}}}]).directive("uiDropzone",["$timeout",function(e){return{restrict:"AE",scope:{attrid:"@",url:"@"},replace:!1,template:'<form method="post" enctype="multipart/form-data" class="dropzone" id="{{attrid}}" action="{{url}}"></form>',link:function(t,n,r){e(function(){new Dropzone("#"+r.attrid,{url:r.url})},500)}}}])}(),angular.module("adminApp").factory("httpReqService",["$http",function(e){var t=function(t){return e({method:"GET",url:t})};return{queryNav:function(e){return t(e)},queryChartData:function(e){return t(e)},queryTableData:function(e){return t(e)}}}]).factory("queryChartService",["$http","$q",function(e,t){var n=function(n){var r=t.defer();return e({method:"GET",url:n}).success(function(e){r.resolve(e)}).error(function(e){r.resolve(e)}),r.promise};return{getChartModel:function(e){return n(e)}}}]).factory("queryUserService",["$http","$q",function(e,t){var n=function(t){return e({method:"GET",url:t})};return{queryUserData:function(e){return n(e)}}}]),angular.module("adminApp").factory("ConstantService",[function(){return{LINECHART_REQ_URL:"/js/data/lineChartData.json",BARCHART_REQ_URL:"/js/data/barChartData.json",PIECHART_REQ_URL:"/js/data/pieChartData.json"}}]),angular.module("ui.load",[]).service("uiLoad",["$document","$q","$timeout",function(e,t,n){var r=[],a=!1,o=t.defer();this.load=function(e){e=angular.isArray(e)?e:e.split(/\s+/);var t=this;return a||(a=o.promise),angular.forEach(e,function(e){a=a.then(function(){return e.indexOf(".css")>=0?t.loadCSS(e):t.loadScript(e)})}),o.resolve(),a},this.loadScript=function(a){if(r[a])return r[a].promise;var o=t.defer(),i=e[0].createElement("script");return i.src=a,i.onload=function(e){n(function(){o.resolve(e)})},i.onerror=function(e){n(function(){o.reject(e)})},e[0].body.appendChild(i),r[a]=o,o.promise},this.loadCSS=function(a){if(r[a])return r[a].promise;var o=t.defer(),i=e[0].createElement("link");return i.rel="stylesheet",i.type="text/css",i.href=a,i.onload=function(e){n(function(){o.resolve(e)})},i.onerror=function(e){n(function(){o.reject(e)})},e[0].head.appendChild(i),r[a]=o,o.promise}}]),angular.module("adminApp").factory("tableService",[function(){return{}}]),angular.module("adminApp").factory("wechatService",["$http",function(e){var t=function(t){return e({method:"GET",url:t})};return{querySefDefMenuArr:function(e){return t(e)},querySefDefSubMenuArr:function(e){return t(e)}}}]).factory("wechartStorageService",["$http",function(e){var t="_selfMenu";return{menus:[],get:function(){return localStorage.getItem(t)},put:function(e){localStorage.setItem(t,e)}}}]);